# Test Windows platform detection using Wine
FROM ubuntu:24.04

# Install Wine and dependencies
RUN apt-get update && apt-get install -y \
    wine \
    wget \
    ca-certificates \
    && rm -rf /var/lib/apt/lists/*

# Create test directory
WORKDIR /test

# Copy the Windows version utility binary
COPY bin/version-windows-amd64.exe /test/version.exe

# Create test script
COPY test/cross-platform/test-platform-windows.sh /test/test-platform-windows.sh
RUN chmod +x /test/test-platform-windows.sh

# Run tests
CMD ["/test/test-platform-windows.sh"]
